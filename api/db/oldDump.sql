CREATE TABLE `person` (
	`id` INT UNSIGNED NOT NULL PRIMARY KEY AUTO_INCREMENT,
	`firstname` CHAR(255) CHARACTER SET utf8 NOT NULL DEFAULT "",
	`lastname` CHAR(255) CHARACTER SET utf8 NOT NULL DEFAULT "",
	`user_id` INT UNSIGNED NOT NULL,
	`birth` DATE NULL DEFAULT null
);

CREATE TABLE `phoneCall` (
	`id` INT UNSIGNED NOT NULL PRIMARY KEY AUTO_INCREMENT,
	`user_id` INT UNSIGNED NOT NULL,
	`person_id` INT UNSIGNED NOT NULL,
	`appointment` DATETIME NOT NULL,
	`reason` CHAR(255) CHARACTER SET utf8 NOT NULL,
	`result` CHAR(255) CHARACTER SET utf8 NOT NULL
);

CREATE TABLE `phone` (
	`id` INT UNSIGNED NOT NULL PRIMARY KEY AUTO_INCREMENT,
	`code` CHAR(255) CHARACTER SET utf8 NOT NULL DEFAULT "420",
	`number` CHAR(255) CHARACTER SET utf8 NOT NULL DEFAULT "",
	`person_id` INT UNSIGNED NOT NULL,
	`user_id` INT UNSIGNED NOT NULL
);

CREATE TABLE `email` (
	`id` INT UNSIGNED NOT NULL PRIMARY KEY AUTO_INCREMENT,
	`email` CHAR(255) CHARACTER SET utf8 NOT NULL DEFAULT "",
	`person_id` INT UNSIGNED NOT NULL,
	`user_id` INT UNSIGNED NOT NULL
);

CREATE TABLE `user` (
	`id` INT UNSIGNED NOT NULL PRIMARY KEY AUTO_INCREMENT,
	`username` CHAR(255) CHARACTER SET utf8 NOT NULL,
	`password` CHAR(255) CHARACTER SET utf8 NOT NULL,
	`person_id` INT UNSIGNED NOT NULL,
	`role` CHAR(255) CHARACTER SET utf8 NOT NULL DEFAULT "owner"
);


ALTER TABLE `person` ADD FOREIGN KEY (`user_id`) REFERENCES `user` (`id`);
ALTER TABLE `phoneCall` ADD FOREIGN KEY (`user_id`) REFERENCES `user` (`id`);
ALTER TABLE `phoneCall` ADD FOREIGN KEY (`person_id`) REFERENCES `person` (`id`);
ALTER TABLE `phone` ADD FOREIGN KEY (`person_id`) REFERENCES `person` (`id`);
ALTER TABLE `phone` ADD FOREIGN KEY (`user_id`) REFERENCES `user` (`id`);
ALTER TABLE `email` ADD FOREIGN KEY (`person_id`) REFERENCES `person` (`id`);
ALTER TABLE `email` ADD FOREIGN KEY (`user_id`) REFERENCES `user` (`id`);
ALTER TABLE `user` ADD FOREIGN KEY (`person_id`) REFERENCES `person` (`id`);
